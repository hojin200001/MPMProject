<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="dao.ComBoardDao">
  
    	 <sql id="ctitle">
        <choose>
            <when test="ctitle != null">
                #{ctitle}
            </when>
            <otherwise>
                '제목없음'
            </otherwise>
        </choose>
    </sql>
    <sql id="ctext">
        <choose>
            <when test="ctext != ctext">
                #{ctext}
            </when>
            <otherwise>
                '내용없음'
            </otherwise>
        </choose>
    </sql>
    
  	<select id="selectNomalBoardDesc" resultType="nomalBoard">
  		select * from nomalBoard order by Nnum desc limit 10
  	</select>
  	
  	<select id="getCount" parameterType="java.util.HashMap" resultType="int"> <!-- 총 게시물 수 얻어오는 sql문 -->
    	select count(*) from comBoard where comId="${id}"
    </select>
    
    <select id="selectBoardPage" parameterType="java.util.HashMap" resultType="comBoard">
    	select * from comBoard where comId = '${id}' order by Cnum desc limit #{offset} ,#{boardsPerPage}
    </select>
    
     <update id="comUpdate" parameterType="comBoard">
        update comBoard set
        Ccount = #{ccount}, Cjob = #{cjob}, ComEmail = #{comEmail},
        Ctitle = <include refid="ctitle"/>,
        Ctext = <include refid="ctext"/>
        where Cnum = #{cnum}
    </update>
    
  	<select id="comView" parameterType="java.util.HashMap" resultType="comBoard">
  		select * from comBoard where Cnum=${cnum}
  	</select>
  	
  	<insert id="insertComBoard" parameterType="java.util.HashMap">
  		insert into comBoard values(0,'개미건설','성실한 용접기사 모집','관악구','용접기술사','1년','011-1111-1111',
  									'formicidae@naver.com','1달',3,80000,'각종 건설업에서 용접을 주로 맡고있는 업체입니다. 성실한분 모집합니다',0,now(),'1111');
  	</insert>
  	<!-- comUser -->
  	<select id="selectOne" parameterType="java.util.HashMap" resultType="comUser">
  		select * from comUser where comId = '${id}'
  	</select>
  	<!-- inComBoard -->
  	<!-- comDay -->
 	<insert id="insertComDay" parameterType="java.util.HashMap">
 		insert into comday values(0, ${}, ${}, ${})
 	</insert>
  </mapper>